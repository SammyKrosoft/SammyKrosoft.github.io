---
layout: post
title: Exchange 2007â€“Event ID 9786 potentially followed by Event ID 623 possible causes
date: 2013-01-11 06:40
author: sammykrosoft
comments: true
categories: [Uncategorized]
---
<p>&nbsp;<p><em><u>Authors </u>: Levon Kohoutek (for the question) and Nagesh Mahadev (for the answer)</em></p><p><strong><u>Question :</u></strong></p><p><em>Exchange 2007 SP3 RU6 - Server 2008 SP2 environment. </em></p><p>Quite frequently we&rsquo;re receiving <strong>ExchangeIS Event 9786&rsquo;s </strong>potentially followed by ESE Event ID: 623 &ldquo;The version store for this instance (x) has reached its maximum size of xxxMb.&rdquo; errors. At this point we&rsquo;re unsure as to what action is precipitating this (e.g. performing a search in Outlook). Also we may have high item counts, and we know we have to do a procdump of Store.</p><p>The question is as follows:</p><p>When viewing the 623 Event in Event Viewer, we can see that it cites a possible long-running transaction as the cause. It identifies this possible transaction by a SessionID, Session-context, and Session-context ThreadID. </p><p>What the SessionID is referring to ? Is there a way to derive anything identifiable (user/mailbox/etc&hellip;) from that number and if so, how?</p><p><strong><u>Answer :</u></strong></p><p>The SessionID represents a particular connection between the store process and ESE. It has no bearing on the client at the other end of the request. It is only helpful when looking at dump of store process. While ESE.DLL is tightly coupled with the Store.exe, ESE is a database engine and serves clients. Similar to how SQL would handle multiple clients issuing requests against a server, except in this case, the clients are different threads within the store. Within a procdump, you *<b>may</b>* be able to locate a session (represented by a JSES object) and tie it back to a particular user depending upon context &ndash; again typically within a procdump only.</p><p>&nbsp;</p><p>About event 9786 :</p><p>Event Type:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Warning   <br>Event Source:&nbsp;&nbsp;&nbsp; MSExchangeIS    <br>Event Category:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Database Storage Engine     <br>Event ID:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 9786    <br>Date:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 10/18/2007    <br>Time:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1:34:04 PM    <br>User:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; N/A    <br>Computer:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BORO    <br>Description:    <br>The database engine has consumed 90% of the "b-trees" resource (60820 used out of a maximum of 67096) for storage group 'GLDSTORE1'. </p><p>For more information, see Help and Support Center at <a href="http://go.microsoft.com/fwlink/events.asp">http://go.microsoft.com/fwlink/events.asp</a>.    <br>Data:    <br>0000: 46 43 42&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FCB&nbsp;&nbsp;&nbsp;&nbsp; <br></p><p>==&gt; This can indicate that we have a user that sends a huge attachment to a large amount of people for example, or there is a large message that is looping between two servers, anyways, there may be a leak in the ESE process due to an other database usage pattern.</p><p>- To see what happens exactly, we have to get a dump and use the userdmp3.pl script on the Dump to see if there was a message leak and or if someone send a large message to a ton of people.</p></p>

