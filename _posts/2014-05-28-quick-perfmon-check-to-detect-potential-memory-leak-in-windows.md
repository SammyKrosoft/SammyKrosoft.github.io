---
layout: post
title: Quick perfmon check to detect potential memory leak in Windows
date: 2014-05-28 13:43
author: sammykrosoft
comments: true
categories: [Uncategorized]
---
<p><p>The below counters are just to be taken as indicators if you suspect a memory leak on your machine; there are other Tools that are designed for detecting precisely memory leaks, but you can start with understanding what Working Set &ndash; Private, Private Bytes and Working Set indicate and watching the below perfmon counters &hellip;</p><p></p><p>- If <u>Windows 2008 or later</u>:</p><p><b><a>\ServerProcess(*)Working</a> Set - Private</b></p><p>The above counter will tell you how much memory each process is using &ndash; it counts the memory allocated just for that specific process, excluding the memory used by the process that can be shared by other processes. So it&rsquo;s the most accurate process memory counter that can tell us if we have a memory leak.</p><p>- If <u>Windows 2003 or earlier</u> :</p><p><b><a>\ServerProcess(*)Private</a></b><b> Bytes</b></p><p>This one reports bytes allocated exclusively for a specific process; its value tends to rise for a leaking process.</p><p><b><a>\ServerProcess(*)Working</a> Set </b></p><p>The above one reports the <u>shared and private bytes</u> allocated to a process; its value tends to rise for a leaking process. (WS Shared bytes correspond to physical memory area that the process shares with other processes while WS private bytes shows memory area only taken by the process itself)</p><p>- All versions:</p><p><b><a>\ServerMemoryAvailable</a> Bytes</b> (for Windows 2003 or earlier)</p><p>or </p><p><b><a>\ServerMemoryAvailable</a> MBytes</b>&nbsp; (For windows 2008 or later &ndash; easier to read without having to convert from Bytes to MB)</p><p></p><p></p><p><strong><u>References:</u></strong></p><p><strong>- Investigating User-Mode Memory Leaks</strong></p><p><a title="http://technet.microsoft.com/en-us/library/cc938582.aspx" href="http://technet.microsoft.com/en-us/library/cc938582.aspx">http://technet.microsoft.com/en-us/library/cc938582.aspx</a></p><p><strong>- What is private bytes, virtual bytes, working set?</strong></p><p><a title="http://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set" href="http://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set">http://stackoverflow.com/questions/1984186/what-is-private-bytes-virtual-bytes-working-set</a></p></p>

